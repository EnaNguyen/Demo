<div class="container">
  <div class="page-header">
    <h1 style="font-size: 2rem; height: 70px; padding: 30px 10px 10px 10px;">üõí Danh S√°ch S·∫£n Ph·∫©m</h1>
    <button class="filter-toggle-btn" (click)="toggleFilter()">
      <span>{{ showFilter ? 'üîº' : 'üîΩ' }}</span>
      <span>{{ showFilter ? '·∫®n B·ªô L·ªçc' : 'Hi·ªÉn Th·ªã B·ªô L·ªçc' }}</span>
    </button>
  </div>
  
  <div class="filter-section" [class.show]="showFilter">
    <h2>B·ªô L·ªçc</h2>
    <div class="filters-container">
      <ng-container *ngFor="let filter of filterConfig.request; let i = index">
        <app-filter-wrapper 
          *ngIf="filter.type !== 'page'"
          [filterOption]="filter"
          (filterChange)="onFilterChange($event)"
        ></app-filter-wrapper>
      </ng-container>
    </div>
  </div>

  <div class="pagination-section">
    <div class="pagination-info">
      <span>Hi·ªÉn th·ªã <strong>{{ (currentPage - 1) * pageSize + 1 }}</strong> - <strong>{{ Math.min(currentPage * pageSize, totalItems) }}</strong> trong t·ªïng <strong>{{ totalItems }}</strong> s·∫£n ph·∫©m</span>
    </div>
    
    <div class="pagination-controls">
      <div class="pagination-buttons">
        <button 
          (click)="previousPage()" 
          [disabled]="currentPage <= 1"
          class="pagination-btn"
        >
          ‚Üê Tr∆∞·ªõc
        </button>
        <span class="page-indicator">Trang {{ currentPage }} / {{ totalPages }}</span>
        <button 
          (click)="nextPage()" 
          [disabled]="currentPage >= totalPages"
          class="pagination-btn"
        >
          Sau ‚Üí
        </button>
      </div>
    </div>
  </div>
  <div class="product-container">
    <div *ngIf="displayedProducts.length === 0" class="no-products">
      <p>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ph√π h·ª£p v·ªõi b·ªô l·ªçc</p>
    </div>
    
    <div class="product-card" *ngFor="let product of displayedProducts">
      <div class="product-image-container">
        <img 
          *ngIf="getPropertyValue(product, 'imageUrl')" 
          [src]="getPropertyValue(product, 'imageUrl')" 
          [alt]="product.label"
          class="product-image"
          (error)="onImageError($event)"
        />
        <div *ngIf="!getPropertyValue(product, 'imageUrl')" class="product-image-placeholder">
          üì¶
        </div>
      </div>

      <div class="product-header">
        <h2 class="product-name">{{ product.label }}</h2>
      </div>
      
      <div class="product-body">
        <div class="product-info">
          <span class="info-label">Ng√†y ph√°t h√†nh:</span>
          <span class="info-value">{{ formatDate(getPropertyValue(product, 'releaseDate')) }}</span>
        </div>
        
        <div class="product-info">
          <span class="info-label">Gi√°:</span>
          <span class="info-value price">{{ formatPrice(getPropertyValue(product, 'price')) }}</span>
        </div>

        <div class="product-info">
          <span class="info-label">H√£ng:</span>
          <span class="info-value">{{ getPropertyValue(product, 'brand') }}</span>
        </div>
      </div>
      <div class="product-footer">
        <button class="btn-detail" (click)="viewDetail(product)">
          Xem chi ti·∫øt
        </button>
      </div>
    </div>
  </div>

  <div class="pagination-bottom">
    <div class="pagination-bottom-content">
      <div class="page-size-selector">
        <label>S·∫£n ph·∫©m/trang:</label>
        <select [(ngModel)]="pageSize" (change)="onPageSizeChange(pageSize)" class="page-size-select">
          <option *ngFor="let size of pageSizeOptions" [value]="size">{{ size }}</option>
        </select>
      </div>

      <div class="pagination-buttons">
        <button 
          (click)="previousPage()" 
          [disabled]="currentPage <= 1"
          class="pagination-btn"
        >
          ‚Üê Tr∆∞·ªõc
        </button>
        <span class="page-indicator">Trang {{ currentPage }} / {{ totalPages }}</span>
        <button 
          (click)="nextPage()" 
          [disabled]="currentPage >= totalPages"
          class="pagination-btn"
        >
          Sau ‚Üí
        </button>
      </div>
    </div>
  </div>
</div>